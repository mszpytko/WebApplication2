<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:c="http://java.sun.com/jsp/jstl/core"  
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      >

    <h:head>
        <!--meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /-->
        <!-- meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/ -->
        <META HTTP-EQUIV="Pragma" CONTENT="no-cache" />
        <META HTTP-EQUIV="Expires" CONTENT="-1" /> 

        <title>SLIDESHOW + VIDEO (POLLING)</title>

    </h:head>

    <h:body>


        <h:form id="form">  
            <p:panel header="SLIDESHOW CONTROL PANEL:" id="slideshowcontrolpanel1"> 
                <h:outputLink value="?faces-redirect=true" shape="rect" > 
                    <h:graphicImage url="#{resource['images:back.png']}" />
                    <h:outputText   value="BACK (to the main manu page)" />
                </h:outputLink>
            </p:panel> 
            <p:commandButton value="START"  icon="ui-icon-play" id="btnStart" 
                             actionListener="#{getImagesFromDBwithPolling.action}" 
                             onclick="poll.start()" 
                             />  
            <p:commandButton type="button" value="Stop"  onclick="poll.stop()" 
                             icon="ui-icon-pause"  id="btnStop" />  

            <p:commandButton value="TEST"  ajax="false" process="@this" immediate="true" 
                             id="btnTest" actionListener="#{getImagesFromDBwithPolling.action}" />  

            <h:outputText id="txt_count" value="#{getImagesFromDBwithPolling.slideInfo}" />
            <OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
                    codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0"
                    WIDTH="240" HEIGHT="10">
                <PARAM NAME="movie" VALUE="procom-b.swf"/> 
                <PARAM NAME="menu" VALUE="false"/> 
                <PARAM NAME="quality" VALUE="high"/>
                <PARAM NAME="wmode" VALUE="transparent"/> 
                <PARAM NAME="bgcolor" VALUE="#FFFFFF"/> 
                <EMBED src="procom-b.swf" menu="false" quality="high" wmode="transparent" bgcolor="#FFFFFF"  
                       WIDTH="140" HEIGHT="30" 
                       TYPE="application/x-shockwave-flash" 
                       PLUGINSPAGE="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">
                </EMBED>
            </OBJECT>

            <p:panel header="#{getImagesFromDBwithPolling.imageInfo}" id="imagepanel">
                <p:graphicImage value="#{getImagesFromDBwithPolling.nextImage}"  id="image"  
                                cache="false" 
                                /> 
            </p:panel>

            <p:poll interval="5" listener="#{getImagesFromDBwithPolling.increment}"     
                    update="imagepanel,txt_count" widgetVar="poll" autoStart="false"/>

        </h:form>   


        <!--
                </f:view>
        -->
    </h:body>

</html> 
